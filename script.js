!function(){function t(t){const e=t.match(/([0-9]+).h5/)[1],n=e.substring(0,4)+"-"+e.substring(4,6)+"-"+e.substring(6,8)+"T"+e.substring(8,10)+":"+e.substring(10,12)+"Z";return new Date(Date.parse(n))}function e(t){return dayjs(t).format("H:mm")}dayjs.locale("nl-be");const n=L.map("map").setView([50.3,4.5],8);L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20}).addTo(n);const o=L.layerGroup();async function a(){const n=await fetch("https://pieterprovoost-hagel.s3.eu-central-1.amazonaws.com/hagel.json"),a=await n.json(),r=Object.keys(a.images).sort(),s=r.slice(-9),i=s.map(t).map(e),c=["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"].slice(-s.length),p=s.map(((t,e)=>{if("string"==typeof a.images[t]){const n=JSON.parse(a.images[t]);return L.geoJSON(n,{color:c[e],weight:0,fillOpacity:.5,onEachFeature:function(t,e){if(t.properties&&t.properties.p_min){const n=Math.round(t.properties.p_min/255*100),o=Math.round(t.properties.p_max/255*100);let a;a=n===o?"<p>"+n+"% kans</p>":"<p>"+n+" - "+o+"% kans</p>",e.bindPopup(a)}}})}}));o.clearLayers(),p.forEach((t=>{t&&t.addTo(o)}));const d=(l=t(r.slice(-1)[0]),dayjs(l).format("dddd D/M H:mm"));var l;document.getElementById("status").innerHTML=d;const m=document.getElementsByClassName("legend")[0];m.innerHTML="";for(var u=0;u<c.length;u++)m.innerHTML+='<i style="background-color: '+c[u]+'"></i>'+i[u]+"<br/>"}o.addTo(n),L.Control.Legend=L.Control.extend({onAdd:function(){return L.DomUtil.create("div","legend")}}),L.control.legend=function(t){return new L.Control.Legend(t)},L.control.legend({position:"topright"}).addTo(n),L.control.locate({setView:!1,keepCurrentZoomLevel:!0}).addTo(n),a(),setInterval((function(){a()}),6e4)}();